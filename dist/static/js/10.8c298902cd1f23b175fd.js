webpackJsonp([10],{"4Wh1":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),n=i("woOf"),o=i.n(n),l={components:{ContentHeadTop:i("4jVa").a},beforeCreate:function(){var e=this;console.log("beforeCreate"),this.$http.get("/hugong/get_sub_address").then(function(t){console.log("response:"),console.log(t);for(var i=t.data.data,a=0;a<i.length;a++){var s={label:i[a].areaName,value:i[a].areaName,areaId:i[a].areaId,children:[]};e.siteInfo.district.options[a]=o()({},s),e.siteInfo.district.districtCache[a]=o()({},{areaId:i[a].areaId,areaName:i[a].areaName}),console.log(e.siteInfo.district.districtCache[a])}})},created:function(){var e=sessionStorage.getItem("site_detail");if(console.log("item:"+e),null!=e){var t=JSON.parse(e);if(null==t.sid)return void console.log("obj.sid == null");this.siteInfo.sid=t.sid,this.siteInfo.cid=t.cid,this.siteInfo.site_name=t.site_name,this.siteInfo.site_location=t.site_location,this.siteInfo.administrator=t.administrator,this.siteInfo.city=t.city,this.siteInfo.district.value=t.district,this.siteInfo.detailed_address=t.detailed_address}},methods:{cancel:function(){this.goBack()},saveSite:function(){var e=this;this.$http({method:"POST",url:"/hugongljb/post_site_info",data:{sid:this.siteInfo.sid,cid:this.siteInfo.sidcid,site_name:this.siteInfo.site_name,site_location:this.siteInfo.site_location,administrator:this.siteInfo.administrator,city:this.siteInfo.city,district:s()(this.siteInfo.district.value),detailed_address:this.siteInfo.detailed_address,prefered_prio:0}}).then(function(t){console.log(t),console.log(t.status),200==t.status&&e.goBack()})},checkDistrictExist:function(e){for(var t=this.siteInfo.district.districtCache,i=!1,a=0;a<t.length;a++){if(e==t[a].areaName){i=!0;break}}return i},findAreaIdByName:function(e){for(var t,i=this.siteInfo.district.districtCache,a=0;a<i.length;a++){var s=i[a];if(console.log(s.areaName),e==s.areaName){t=s.areaId;break}}return t},handleItemChange:function(e){console.log("handleItemChange() ,itemVal: "+e);var t=this.findAreaIdByName(e);console.log("handleItemChange() ,areaId: "+t),this.$http({method:"POST",url:"/hugong/get_sub_address?pid="+t}).then(function(e){console.log(e),console.log(e.status)})},handleDistrictChange:function(){console.log(this.siteInfo.district.value),console.log(s()(this.siteInfo.district.value))},searchRegion:function(){console.log("enter searchRegion"),this.$http.get("/hugong/get_sub_address").then(function(e){console.log("response:"),console.log(e)})}},data:function(){return{siteInfo:{sid:"",cid:"",site_name:"",hospital_name:"",administrator:"",city:"",district:{options:[{value:"广东省",areaId:"222",label:"广东省",children:[{value:"深圳市",areaId:22244,label:"深圳市",children:[{value:"宝安区",label:"宝安区"},{value:"福田区",label:"福田区"},{value:"罗湖区",label:"罗湖区"},{value:"南山区",label:"南山区"}]},{value:"广州市",label:"广州市",children:[{value:"越秀区",label:"越秀区"},{value:"番禺区",label:"番禺区"}]}]},{value:"北京市",label:"北京市",children:[{value:"北京城区",label:"北京城区",children:[{value:"东城区",label:"东城区"},{value:"西城区",label:"西城区"},{value:"朝阳区",label:"朝阳区"}]}]}],value:[],provinces:[],cities:[],districtCache:[]},detailed_address:"",site_location:""},rules:{site_name:[{required:!0,message:"请输入网点名称",trigger:"blur"}],hospital_name:[{required:!0,message:"请输入医院名称",trigger:"blur"}],district:[{required:!0,message:"请选择地区",trigger:"blur"}],detailed_address:[{required:!0,message:"请输入详细位置",trigger:"blur"}],administrator:[{required:!0,message:"请输入管理员",trigger:"blur"}],site_location:[{required:!0,message:"请选择地点",trigger:"blur"}]},imageUrl:""}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"arrangement-by-row"},[i("content-head-top",{staticClass:"router-content-header"}),e._v(" "),i("section",{staticClass:"section_container"},[i("el-main",[i("el-row",{staticStyle:{"text-align":"left",padding:"10px"}},[i("el-breadcrumb",{staticStyle:{"text-align":"left",padding:"10px 0 30px 10px","font-size":"16px",color:"rgb(97, 186, 238)"}},[e._v("新增网点")]),e._v(" "),i("el-form",{attrs:{"label-width":"100px",rules:e.rules}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"网点名称:",prop:"siteInfo.site_name"}},[i("el-input",{model:{value:e.siteInfo.site_name,callback:function(t){e.$set(e.siteInfo,"site_name",t)},expression:"siteInfo.site_name"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-row",[i("el-form-item",{attrs:{label:"地区:"}},[i("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",options:e.siteInfo.district.options},on:{"active-item-change":e.handleItemChange,change:e.handleDistrictChange},model:{value:e.siteInfo.district.value,callback:function(t){e.$set(e.siteInfo.district,"value",t)},expression:"siteInfo.district.value"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"详细位置:",prop:"siteInfo.detailed_address"}},[i("el-input",{model:{value:e.siteInfo.detailed_address,callback:function(t){e.$set(e.siteInfo,"detailed_address",t)},expression:"siteInfo.detailed_address"}})],1)],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"管理员:",prop:"siteInfo.administrator"}},[i("el-input",{model:{value:e.siteInfo.administrator,callback:function(t){e.$set(e.siteInfo,"administrator",t)},expression:"siteInfo.administrator"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"地图选点:",prop:"siteInfo.site_location"}})],1)],1)],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"padding-top":"10px","padding-bottom":"10px"}},[i("span",[i("el-button",{nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("取消")]),i("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.saveSite(t)}}},[e._v("保存")])],1)])],1)},staticRenderFns:[]};var d=i("VU/8")(l,r,!1,function(e){i("W2oi")},null,null);t.default=d.exports},W2oi:function(e,t){}});
//# sourceMappingURL=10.8c298902cd1f23b175fd.js.map